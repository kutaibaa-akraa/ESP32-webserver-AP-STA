<!DOCTYPE html>
<html dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>إعدادات الشبكة</title>
  <link rel="stylesheet" href="/css/all.min.css?v=1.1">
  <link rel="stylesheet" href="/css/cairo.css?v=1.1">
  <link rel="stylesheet" href="/css/tajawal.css?v=1.1">
  <link rel="stylesheet" href="/css/config.css?v=1.1">
  <script>
    // دعم WebView لـ MIT App Inventor
    const isWebView = /WebView|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    
    if (isWebView) {
      window.stopAutoRefresh = true;
      document.body.style.overscrollBehavior = "none";
      document.documentElement.style.overflow = "hidden";
      document.body.style.touchAction = "none";
    }
  </script>
</head>
<body>
<!-- في بداية body لكل صفحة -->
<div class='dark-mode-toggle' onclick='toggleDarkMode()'>
  <i id='darkModeIcon' class='fas fa-moon'></i>
</div>
  <div class="card">
  <div class="auth-header">
  <button onclick="logout()" class="button button-logout">
    <i class="fas fa-sign-out-alt"></i> تسجيل الخروج
  </button>
</div>
    <div class="header">
      <i class="fas fa-wifi fa-3x"></i>
      <h1>إعدادات الشبكة</h1>
      <p>قم بتكوين إعدادات اتصال Wi-Fi للجهاز</p>
    </div>

    <div id="alert" class="alert" style="display:none;"></div>

    <form id="wifiForm">
      <div id="networkContainer">
	  <!-- داخل كل بطاقة شبكة -->
         <input type="hidden" name="priority_${index}" value="${net.priority || index + 1}">
        <!-- سيتم إضافة بطاقات الشبكات هنا ديناميكيًا -->
      </div>

      <div class="form-actions">
        <button type="button" id="addNetworkBtn" class="button">
          <i class="fas fa-plus"></i> إضافة شبكة
        </button>
        <button type="submit" class="save-button">
          <i class="fas fa-save"></i> حفظ الإعدادات
        </button>
      </div>
    </form>

    <div class="help-section">
      <h3><i class="fas fa-info-circle"></i> تعليمات</h3>
      <p>• يمكنك إضافة حتى 5 شبكات مختلفة، وسيحاول الجهاز الاتصال بهم حسب الأولوية.</p>
      <p>• الشبكة ذات الأولوية الأعلى (1 هي الأعلى) سيتم تجربتها أولاً.</p>
      <p>• عند استخدام IP ثابت، تأكد من صحة الإعدادات لتجنب مشاكل الاتصال.</p>
    </div>
  </div>

  <!-- ملفات JavaScript -->
  <script src="/js/config.js?v=1.1" defer></script>
  <script src="/js/main.js?v=1.1" defer></script>
</body>
</html>